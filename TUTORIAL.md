## Развертывание системы


Развертывание системы происходит на удаленном сервере. Настройки подключения к удаленному серверу необходимо внести в следующие 4 файла:

:key: файл install/group_vars/TargetServers содержит настройки подключения к удаленному серверу;

:key: файл install/inventory.txt содержит ip-адрес удаленного сервера;

:key: файл install/keys/ansible.key содержит приватный ключ OPENSSH удаленного сервера;

:key: файл install/source/hitvisc/main/hitvisc.conf содержит системные настройки системы HiTViSc.

Опишем выбор корректных настроек на примере. 

### :key: Настройки подключения к удаленному серверу

### :key: Ip-адрес удаленного сервера

### :key: Приватный ключ OPENSSH удаленного сервера

### :key: Системные настройки системы HiTViSc

Следующая группа параметров описывает основные системные настройки системы HiTViSc, и их рекомендуется оставить неизменными.

```
registry_database        = hitvisc
hitvisc_api_dir          = /app/hitvisc/api
hitvisc_main_dir         = /app/hitvisc/main
hitvisc_data_dir         = /app/hitvisc/data
hitvisc_bio_dir          = /app/hitvisc/bio
hitvisc_log_dir          = /app/hitvisc/log
hitvisc_tmp_dir          = /app/hitvisc/tmp
```

Настройки, связанные с BOINC-проектом, функционирующим внутри системы HiTViSc, можно выбрать по своему усмотрению. 
 
```
project_database         = hitboinc
project_user             = hitviscadm
project_password         = passBOINC_2024
project_directory        = /app/hitboinc
boinc_results_dir        = /app/hitboinc/sample_results
boinc_user_email         = 
boinc_user_name          = 
boinc_user_passwd_hash   = 
boinc_user_authenticator = 
```


## Общий интерфейс системы

Общий интерфейс системы состоит из панели меню (слева) и рабочей области экрана, в которой реализован основной блок взаимодействия с пользователем.
Панель меню состоит из следующих разделов:
- Проекты – список проектов пользователя, функционал создания новых проектов,
- Ресурсы – список вычислительных ресурсов пользователя, включая тестовые, общедоступные и частные,
- Новости – информация о важных событиях системы, таких как обновление программного обеспечения, создание и завершение общедоступных проектов,
- Библиотека:
    - Мишени – библиотека мишеней, доступных для использования в виртуальном скрининге,
    - Лиганды – библиотека лигандов, доступных для использования в виртуальном скрининге,
- Уведомления – пользовательские уведомления о событиях в проектах, таких как завершение заданного числа заданий или нахождение заданного числа хитов в пользовательских проектах,
- Настройки – настройки системы, связанные с взаимодействием с конкретным пользователем.
    
![image](https://github.com/user-attachments/assets/e565fb58-7abb-45ae-8d82-debdb56e44ca)

Основной функционал системы связан с созданием проектов виртуального скрининга. Для пользователей доступны:
- Добавление проектов,
- Редактирование проектов,
- Использование результатов проекта.

## Добавление проектов

Для добавления проектов служит кнопка «Добавить» в разделе «Проекты».
![image](https://github.com/user-attachments/assets/dc92e1f7-16cd-4aab-893b-f397f1718dd5)

При нажатии на кнопку, появляется форма Помощника создания нового проекта. Помощник реализует четыре шага-этапа по созданию проекта с указанием необходимых параметров. 
На каждом шаге у пользователя есть возможность верифицировать заполненные данные, нажав кнопку «Далее» или перейти на следующий шаг без верификации.

![image](https://github.com/user-attachments/assets/4c9d4187-3fc4-48a9-909a-3fed18e637eb)

Первый шаг создания проекта – это его описание, задание мишени и библиотеки лигандов. Пользователь вводит название проекта, режим доступа к нему и описание.
Существует три режима доступа к проекту:
- Закрытый – проект не публикуется в системе для остальных пользователей; такой режим доступен только при использовании частных вычислительных ресурсов – без привлечения ресурсов волонтеров и других пользователей системы, 
- Частный – для пользователей системы доступна только общая информация о проекте,
- Общий – проект доступен для ознакомления всем пользователям системы, в том числе информация об исходных данных, параметрах выполнения эксперимента, его результатах.

![image](https://github.com/user-attachments/assets/37948e26-447f-4e7d-8a63-f87ea1d61411)

Мишень выбирается из библиотеки мишеней, библиотека лигандов выбирается из соответствующей библиотеки. Для ознакомления с функционалом создания редактирования и удаления библиотеки мишеней, перейдите в раздел инструкции "Управление библиотеками".
На следующем шаге необходимо выбрать расчетное приложение и задать параметры (протокол) молекулярного докинга в соответствии с выбранным приложением. В системе доступны две наиболее широко распространенные программы молекулярного докинга – AutoDock Vina и CmDock. Настройки протокола молекулярного докинга можно либо ввести вручную, либо загрузить соответствующим файлом.

![image](https://github.com/user-attachments/assets/c65284ce-acc0-45f5-9f61-dc43e0ebfff8)

![image](https://github.com/user-attachments/assets/a9b40298-4f4e-486e-bfe0-d862cbca0115)

Следующий этап создания проекта – это установка параметров эксперимента. На этом шаге устанавливаются критерии отбора хитов (энергия связывания или эффективность лиганда), критерий остановки (процент проверенных лигандов, число найденных хитов или процент хитов от числа лигандов), а также устанавливаются пользовательские оповещения.

![image](https://github.com/user-attachments/assets/94bcdfac-40ae-4268-a3b6-5415df7f93e6)

На этом же этапе выбираются вычислительные ресурсы, которые будут использованы при запуске проекта. Пользователю доступен выбора из следующих типов ресурсов:
- Тестовые ресурсы – высоконадежные и доступные вычислительные ресурсы, сопровождаемые Системой и используемые в ограниченном режиме для тестирования настроек проекта,
- Частные ресурсы – ресурсы, добавленные пользователем из собственных доступных и в приоритетном порядке используемые для расчета проектов пользователя; при выборе закрытого или частного проекта, расчеты могут выполняться только на частных ресурсах,
- Общедоступные ресурсы – ресурсы других пользователей системы, отмеченные как общедоступные, ресурсы волонтеров; общедоступные ресурсы могут использоваться только в рамках открытых проектов, информация о результатах которых доступна всем пользователям системы.

Заключительный шаг создания проекта – это его запуск. На этом шаге пользователю предоставляется сводка всех параметров проекта и предлагается отправить проект на запуск расчетов. В качестве альтернативы – если пользователь еще не готов отправлять проект на расчеты, а хочет отложить это действие, например, для уточнения параметров – можно сохранить проект и запустить позже.

![image](https://github.com/user-attachments/assets/cc1282d0-bd60-451c-b999-38da9fdd5504)

В результате выполнения всех шагов Помощника, при успешном прохождении верификации, будет создан проект на доступных вычислительных ресурсах. Процедура виртуального скрининга является вычислительноемкой, поэтому она может занимать от нескольких часов до нескольких месяцев в зависимости от установленных параметров, размера используемой библиотеки лигандов и объема доступных вычислительных ресурсов. 

## Редактирование и удаление проектов

Созданный ранее сохраненный проект можно отредактировать и/или удалить. Для этого в интерфейсе системы, в основном окне списка проектов, на карточке соответствующего проекта необходимо выбрать пункт «Редактировать проект» или «Удалить проект». Функционал редактирования проекта аналогичен функционалу создания проекта – с использованием того же Помощника и прохождением тех же шагов, но с заполненными ранее полями.

![image](https://github.com/user-attachments/assets/9f1c7cde-c62d-432b-9a11-0397c54e6aa0)

## Использование результатов проекта

Для доступа к результатам проекта в интерфейсе системы, в основном окне списка проектов, на карточке соответствующего проекта необходимо нажать кнопку «Результаты».

![image](https://github.com/user-attachments/assets/ddaeaa6d-1049-41c6-9f12-912ba1260e93)


Результаты доступны в виде трех файлов: файл с информацией о всех хитах, файл с таблицей химически разнообразных хитов и файл-визуализация множества хитов.

![image](https://github.com/user-attachments/assets/37f08c1e-95b8-4285-9efd-4a310d6082d7)

## Управление ресурсами

Ресурсы – это вычислительные узлы (персональные или рабочие компьютеры, сервера, вычислительные кластеры), используемые для выполнения расчетов (моделирования, молекулярного докинга) в рамках виртуального скрининга. Для решения общей задачи виртуального скрининга, полная база лигандов разбивается на части, формируя для вычислительного узла задания, в рамках которых необходимо выполнить молекулярный докинг небольшого числа лигандов против мишени.
В системе выделяется три типа ресурсов:
- Тестовые ресурсы – высоконадежные и доступные вычислительные ресурсы, сопровождаемые Системой и используемые в ограниченном режиме для тестирования настроек проекта,
- Частные ресурсы – ресурсы, добавленные пользователем из собственных доступных и в приоритетном порядке используемые для расчета проектов пользователя; при выборе закрытого или частного проекта, расчеты могут выполняться только на частных ресурсах,
- Общедоступные ресурсы – ресурсы других пользователей системы, отмеченные как общедоступные, ресурсы волонтеров; общедоступные ресурсы могут использоваться только в рамках открытых проектов, информация о результатах которых доступна всем пользователям системы.
Для управления ресурсами, необходимо в панели меню выбрать соответствующий раздел.

![image](https://github.com/user-attachments/assets/d3c3840c-8074-418b-8487-388464fd24bd)

### Общие ресурсы 

При выборе пункта меню «Ресурсы-Общие», в рабочем окне отображается список доступных общих ресурсов системы.

![image](https://github.com/user-attachments/assets/a258baa3-125b-42ce-897d-6eb8e501eb0f)

В списке общих ресурсов системы отображается следующая информация:
- имя вычислительного узла, 
- дата последнего обращения вычислительного узла на сервер системы (для получения задания или отчета о результатах), 
- количество текущих заданий, которые были направлены ранее на вычислительный узел и для которых еще не получены результаты,
- общее количество завершенных узлом заданий, 
- режим доступа к вычислительному узлу.
Для вычислительных узлов, добавленных пользователем, доступна возможность редактирования имени узла.

### Частные ресурсы 

При выборе пункта меню «Ресурсы-Частные», в рабочем окне отображается список доступных частных ресурсов системы.
В списке частных ресурсов системы отображается следующая информация:
- имя вычислительного узла, 
- дата последнего обращения вычислительного узла на сервер системы (для получения задания или отчета о результатах), 
- количество текущих заданий, которые были направлены ранее на вычислительный узел и для которых еще не получены результаты,
- общее количество завершенных узлом заданий, 
- режим доступа к вычислительному узлу.
Для вычислительных узлов доступна возможность редактирования имени узла.

### Тестовые ресурсы

При выборе пункта меню «Ресурсы-Тестовые», в рабочем окне отображается список доступных общих ресурсов системы.
В списке тестовых ресурсов системы отображается следующая информация:
- имя вычислительного узла, 
- дата последнего обращения вычислительного узла на сервер системы (для получения задания или отчета о результатах), 
- количество текущих заданий, которые были направлены ранее на вычислительный узел и для которых еще не получены результаты,
- общее количество завершенных узлом заданий, 
- режим доступа к вычислительному узлу.
Для вычислительных узлов, добавленных пользователем, доступна возможность редактирования имени узла.

### Добавление ресурсов

Для общих и частных ресурсов доступно добавление вычислительных узлов. 
При нажатии кнопки «Добавить» в соответствующем разделе ресурсов, появляется всплывающее окно, дающее инструкции по подключению нового вычислительного узла.

![image](https://github.com/user-attachments/assets/5b11a24d-5b71-42f7-abe7-80e487380a15)

Подключен может быть только тот вычислительный узел, на котором установлено соответствующее программное обеспечение – клиент BOINC. Подключение вычислительного узла выполняется штатными средствами клиента BOINC.

## Управление библиотеками

Библиотеки используются для структурирования хранения и использования, повторного использования в проектах информации о мишенях и лигандах, применяемых при выполнении виртуального скрининга.
Выбор соответствующего раздела библиотек производится посредством бокового меню.

![image](https://github.com/user-attachments/assets/ee222c4b-bec4-4bfb-abd3-9b0ef870fea9)

### Мишени

При выборе раздела бокового меню «Библиотека-Мишени», в рабочем окне отображается список доступных библиотек мишеней.

![image](https://github.com/user-attachments/assets/088a456f-8ac6-45c4-bd0a-ecc697522b89)

Библиотеки мишеней отображаются в виде карточек. На каждой карточке размещается следующая информация:
- Режим доступа,
- Автор или авторы,
- Создатель (пользователь, добавивший библиотеку),
- Краткое описание.
Для библиотек, созданных пользователем, доступны редактирование и удаление библиотеки.
Для добавления новой библиотеки мишени, необходимо нажать кнопку «Добавить» главного рабочего окна (рисунок А.16) и заполнить соответствующую форму (рисунок А.17).
При заполнении формы, необходимо указать следующую информацию:
- Название библиотеки мишени,
- Краткое описание библиотеки мишени,
- Авторство библиотеки,
- Источник, откуда получена библиотека,
- Режим доступа к библиотеке (закрытая, частная, общая),
- Источник файла мишени в формате PDB – это может быть отдельный PDB-файл или ID файла PDB в базе данных мишеней.
- Необходимость извлечь справочный лиганд, сохраненный в PDB-файле мишени.
После нажатия кнопки «Добавить мишень», новая библиотека появится в списке карточек библиотек мишеней, а также будет доступна для выбора при создании нового проекта.

![image](https://github.com/user-attachments/assets/a613b0c1-3a1e-4a43-8ff9-4e250644ba9b)

### Лиганды

При выборе раздела бокового меню «Библиотека-Лиганды», в рабочем окне отображается список доступных библиотек лигандов 

![image](https://github.com/user-attachments/assets/967da64b-141f-4621-a87f-c378008944de)

Библиотеки лигандов отображаются в виде карточек. На каждой карточке размещается следующая информация:
- Режим доступа,
- Автор или авторы,
- Создатель (пользователь, добавивший библиотеку), 
- Краткое описание.
Для библиотек, созданных пользователем, доступны редактирование и удаление библиотеки.
Для добавления новой библиотеки лигандов, необходимо нажать кнопку «Добавить» главного рабочего окна (рисунок А.16) и заполнить соответствующую форму (рисунок А.19).
При заполнении формы, необходимо указать следующую информацию:
- Название библиотеки (коллекции) лигандов,
- Краткое описание библиотеки лигандов,
- Авторство библиотеки,
- Источник, откуда получена библиотека,
- Режим доступа к библиотеке (закрытая, частная, общая),
- Источник файла лигандов – при небольшом размере файла, его можно загрузить напрямую; при большом размере файла можно указать ссылку на него на файлообменнике.
После нажатия кнопки «Добавить коллекцию лигандов», новая библиотека появится в списке карточек библиотек лигандов, а также будет доступна для выбора при создании нового проекта.

![image](https://github.com/user-attachments/assets/58355b72-593c-4cc8-ba1d-47b0fb14ac46)

## Вспомогательный функционал

Вспомогательный функционал системы связан с обеспечением дополнительных возможностей удобства пользователей и функционирования системы. К вспомогательному функционалу относятся разделы:
- Новости – информация о важных событиях системы, таких как обновление программного обеспечения, создание и завершение общедоступных проектов,
- Уведомления – пользовательские уведомления о событиях в проектах, таких как завершение заданного числа заданий или нахождение заданного числа хитов в пользовательских проектах,
- Настройки – настройки системы, связанные с взаимодействием с конкретным пользователем.
Доступ к разделам осуществляется из соответствующих пунктов бокового меню.

![image](https://github.com/user-attachments/assets/aab4cb71-0743-4ed6-ab7f-9ec4cb883340)





























